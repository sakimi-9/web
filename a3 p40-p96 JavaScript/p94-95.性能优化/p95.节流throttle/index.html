<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        h6 {
            height: 300px;
        }
    </style>
</head>

<body>
    <h3>节流throttle</h3>
    <p>节流也是用于浏览器性能优化的</p>
    <p>描述:事件在预设间隔中不断触发，也能每隔一段时间执行一次，执行后进入失效期，过了失效期还在触发才会执行</p>
    <p>格式:
        function throttle(fn,delay){
        var valid = true;
        return function(){
        if(!valid){
        return false;
        }
        valid = false;
        setTimeout(function(){
        fn();
        valid = true;
        },delay)
        }
        }
        function 原始事件函数名（）{事件处理}

        元素节点.事件类型 = 防抖函数debounce(高频率触发的原始事件函数，预设时间间隔)</p>
    <h6>3</h6>
    <h6>3</h6>
    <h6>3</h6>
    <h6>3</h6>
    <h6>3</h6>
    <h6>3</h6>
    <h6>3</h6>
    <h6>3</h6>
    <h6>3</h6>
    <script>
        function throttle(fn, delay) {
            var valid = true;
            return function () {
                if (!valid) {          //初始 状态valid为true，不会进入if语句
                    return false;    // valid为false进入if语句，return false 代码停止，不再向下执行，等待valid重置为true
                }
                valid = false;      //给valid赋值为false，然后向下执行，如果valid下次没有重置为true，则会进入if语句，代码暂停
                setTimeout(function () {  //如果原始事件在间隔期内停止触发，那么valid还是为false，定时器不会执行
                    fn();           //原始事件在间隔时间内不断触发，按照间隔期限执行一次
                    valid = true;   //按照间隔期限执行一次重置valid为true
                }, delay)
            }
        }

        function scroll() {
            console.log(document.documentElement.scrollTop);
            console.log(new Date(Date.now()));
        }
        window.onscroll = throttle(scroll, 3000);

        // //防抖debouce(fn,delay)格式
        // function debounce(fn,delay){
        //     var timer = null;
        //     return function(){
        //         if(timer){
        //             clearTimeout(timer);
        //         }
        //         timer = setTimeout(fn,delay);
        //     }
        // }

        // //节流throttle(fn,delay)格式
        // function throttle(fn,delay){
        //     var valid = true;
        //     return function(){
        //         if (!valid) {
        //             return false;
        //         }
        //         valid = false;
        //         setTimeout(function(){
        //             fn();
        //             valid = true;
        //         },delay)
        //     }
        // }


    </script>
</body>

</html>